<launch>
  <!-- Frames -->
  <arg name="uav_name" default="$(optenv UAV_NAME)" />
  <arg name="map_frame" default="$(arg uav_name)/aloam_origin" />

  <!-- Parameters -->
  <arg name="resolution" default="0.2" />
  <arg name="add_free_space_ray_len" default="10.0" />
  <arg name="sensor_model_hit" default="0.7" />
  <arg name="sensor_model_miss" default="0.4" />
  <arg name="color_alpha" default="0.7" />

  <!-- Topics -->
  <!-- <arg name="pointcloud2_in" default="/$(arg uav_name)/aloam_mapping/sensor_cloud_registered" /> -->
  <arg name="pointcloud2_in" default="/$(arg uav_name)/aloam_mapping/laser_cloud_map" />
  <arg name="pointcloud2_over_max_range_in" default="/$(arg uav_name)/os1_cloud_node/points_over_max_range" />

  <!-- Octomap Server node -->
  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server">
    <param name="publish_free_space" type="bool" value="true" />
    <param name="resolution" type="double" value="$(arg resolution)" />
    <param name="frame_id" type="string" value="$(arg map_frame)" />
    <param name="add_free_space_ray_len" type="double" value="$(arg add_free_space_ray_len)" />
    <param name="sensor_model/max_range" type="double" value="-1.0" /> 
    <param name="sensor_model/hit" type="double" value="$(arg sensor_model_hit)" />
    <param name="sensor_model/miss" type="double" value="$(arg sensor_model_miss)" />
    <param name="color_alpha" type="double" value="$(arg color_alpha)" />

    <param name="latch" type="bool" value="false" />
    <param name="filter_ground" type="bool" value="false" />

    <remap from="cloud_in" to="$(arg pointcloud2_in)" />
    <remap from="cloud_over_max_range_in" to="$(arg pointcloud2_over_max_range_in)" />
  </node>
</launch>
